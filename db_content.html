<style>
#schemaProperty, th, td{
	color:#000;
	border:1px solid #000;
	margin:100px;
	border-collapse:collapse;
	padding:5px;
}
#btnBox>button{
	
	width:100px;
	height:30px;
	
}
</style>
<div id="btnBox">
	<button>Alter</button>
	<button>Drop</button>
</div>
<table id="schemaProperty">
	<tr>
		<th></th>
		<th>Schema name</th>
		<th>Schema owner</th>
		<th>Description</th>
	</tr>
</table>
<script>
		
		// Schema information of the database selected in the object browser
		socket.once('get_dbname_schema', function(data){
			
			var schema_property = JSON.parse(data);
			
			for(var i = 0 ; i < schema_property.length ; i ++){
				
				var tr = $('<tr>').appendTo("#schemaProperty");
				
				if(i == 0 ){
					
					$("<td>").append("<input type='checkbox' class='checkbox' checked/>").appendTo(tr);
					
				}else{
					
					$("<td>").append("<input type='checkbox' class='checkbox'/>").appendTo(tr);
					
				}
				
				$('<td class="schema_name">').text(schema_property[i].schema_name).appendTo(tr);
				
				$('<td class="schema_owner">').text(schema_property[i].schema_owner).appendTo(tr);
				
				$('<td class="description">').text(schema_property[i].description).appendTo(tr);
				
			}
					
		});
		
		// Alter button
		$("#btnBox>button:eq(0)").click(function(){
			
			// Alters the selected schema
			if($("#schemaProperty td").length){
			
				$.ajax({
					url: "alter_schema.html",
					success:function(data){
						
						var $content = $(".content");
						var schema_name = $(".checkbox:checked").parent().siblings(".schema_name").text();
						var schema_owner = $(".checkbox:checked").parent().siblings(".schema_owner").text();
						var description = $(".checkbox:checked").parent().siblings(".description").text();
						
						$content.empty().html(data);
						$content.find("#oldName").val(schema_name);
						$content.find("#name").val(schema_name);
						
						$content.find("#oldOwner").val(schema_owner);					
						$content.find("#owner").val(schema_owner);					
						
						$content.find("#oldCmt").val(description);
						$content.find("#comment").val(description);
						
					}
				});
				
			}
			
		});
		
		// Drop button
		$("#btnBox>button:eq(1)").click(function(){
			
			//Drops the selected schema
			if($("#schemaProperty td").length){
				
				var schema_name = $(".checkbox:checked").parent().siblings(".schema_name").text();
				
				if(window.confirm('Really want to drop?')){

				socket.emit('drop_schema', schema_name);
				
				socket.once('schema_success', function(error){
					
					if(error==null){
						
						alert("Schema dropped.");
						
						// Refresh
						$(".db.on").click();
						
					}else{
						
						alert(error);
					}
				});
				
				}
			}
		});

		
</script>
